#!/bin/bash  

if [ -z "$1" ]; then
  echo "Error: A file name must be set, e.g. on \"the wonderful thing about tiggers\"."
  exit 1
fi

file_name=$(echo "$1" | tr ' ' '-')

# Check if -d flag is provided for date prefix
if [ "$2" = "-d" ] || [ "$1" = "-d" ]; then
  # If -d is the first argument, shift to get the actual filename
  if [ "$1" = "-d" ]; then
    shift
    file_name=$(echo "$1" | tr ' ' '-')
  fi
  
  # Add today's date prefix
  date_prefix=$(date +%Y-%m-%d)
  file_name="${date_prefix}_${file_name}"
fi

cd "$HOME/obsidian/inbox" || exit
touch "${file_name}.md"
nvim "${file_name}.md"
